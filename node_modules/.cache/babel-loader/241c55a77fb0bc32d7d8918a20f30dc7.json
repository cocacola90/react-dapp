{"ast":null,"code":"import _slicedToArray from \"/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/src/App.tsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport { useEtherBalance, useEthers, useSendTransaction } from '@usedapp/core';\nimport { formatEther } from '@ethersproject/units';\nvar unityContext = new UnityContext({\n  loaderUrl: \"unity/Build/Build.loader.js\",\n  dataUrl: \"unity/Build/Build.data\",\n  frameworkUrl: \"unity/Build/Build.framework.js\",\n  codeUrl: \"unity/Build/Build.wasm\"\n});\n\nfunction EtherBalanceToUnity(amount) {\n  unityContext.send(\"GetAddressWallet\", \"EtherBalanceToUnity\", amount);\n  console.log(amount);\n}\n\nvar STAKING_CONTRACT = '0x00000000219ab540356cBB839Cbe05303d7705Fa';\n\nvar App = function App() {\n  var _useEthers = useEthers(),\n      activateBrowserWallet = _useEthers.activateBrowserWallet,\n      account = _useEthers.account,\n      deactivate = _useEthers.deactivate;\n\n  var _useSendTransaction = useSendTransaction(),\n      sendTransaction = _useSendTransaction.sendTransaction,\n      state = _useSendTransaction.state; // const { sendTransaction } = useSendTransaction({ transactionName: 'Send Ethereum' });\n\n\n  var etherBalance = useEtherBalance(account);\n  var stakingBalance = useEtherBalance(STAKING_CONTRACT);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isGameOver = _useState2[0],\n      setIsGameOver = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userName = _useState4[0],\n      setUserName = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      score = _useState6[0],\n      setScore = _useState6[1];\n\n  useEffect(function () {\n    unityContext.on(\"SendTrans\", function (address, amount) {\n      console.log(address, amount);\n      sendTransaction({\n        to: address,\n        value: amount\n      });\n    }); // unityContext.on(\"SendTranscationFromUnity\",( address, amount) => {\n    //   sendTransaction({ to: address, value: amount })\n    // });\n\n    unityContext.on(\"GameOver\", function (userName, score) {\n      console.log(userName, score); // setIsGameOver(true);\n      // setUserName(userName);\n      // setScore(score);\n    });\n    unityContext.on(\"Disconnect\", function () {\n      deactivate();\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      activateBrowserWallet();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, \"Connect\"), account && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 23\n    }\n  }, \"Account: \", account), etherBalance && EtherBalanceToUnity(formatEther(etherBalance))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, account && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: deactivate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, \" Disconnect \"), stakingBalance && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 26\n    }\n  }, \"ETH2 staking balance: \", formatEther(stakingBalance), \" ETH \"), isGameOver === true && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, \"Game Over! \".concat(userName, \" \").concat(score, \" points\")), /*#__PURE__*/React.createElement(Unity, {\n    unityContext: unityContext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/src/App.tsx"],"names":["React","useState","useEffect","Unity","UnityContext","useEtherBalance","useEthers","useSendTransaction","formatEther","unityContext","loaderUrl","dataUrl","frameworkUrl","codeUrl","EtherBalanceToUnity","amount","send","console","log","STAKING_CONTRACT","App","activateBrowserWallet","account","deactivate","sendTransaction","state","etherBalance","stakingBalance","isGameOver","setIsGameOver","userName","setUserName","score","setScore","on","address","to","value"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,OAAO,WAAP;AACA,OAAOC,KAAP,IAAgBC,YAAhB,QAAoC,mBAApC;AACA,SAASC,eAAT,EAA0BC,SAA1B,EAAqCC,kBAArC,QAA+D,eAA/D;AACA,SAASC,WAAT,QAAuC,sBAAvC;AACA,IAAMC,YAAY,GAAG,IAAIL,YAAJ,CAAiB;AACpCM,EAAAA,SAAS,EAAE,6BADyB;AAEpCC,EAAAA,OAAO,EAAE,wBAF2B;AAGpCC,EAAAA,YAAY,EAAE,gCAHsB;AAIpCC,EAAAA,OAAO,EAAE;AAJ2B,CAAjB,CAArB;;AAOA,SAASC,mBAAT,CAA6BC,MAA7B,EAA8C;AAC5CN,EAAAA,YAAY,CAACO,IAAb,CAAkB,kBAAlB,EAAsC,qBAAtC,EAA6DD,MAA7D;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACD;;AAED,IAAMI,gBAAgB,GAAG,4CAAzB;;AACA,IAAMC,GAAG,GAAG,SAANA,GAAM,GAAM;AAAA,mBAGuCd,SAAS,EAHhD;AAAA,MAGRe,qBAHQ,cAGRA,qBAHQ;AAAA,MAGeC,OAHf,cAGeA,OAHf;AAAA,MAGyBC,UAHzB,cAGyBA,UAHzB;;AAAA,4BAImBhB,kBAAkB,EAJrC;AAAA,MAIRiB,eAJQ,uBAIRA,eAJQ;AAAA,MAISC,KAJT,uBAISA,KAJT,EAKjB;;;AACC,MAAMC,YAAY,GAAGrB,eAAe,CAACiB,OAAD,CAApC;AACA,MAAMK,cAAc,GAAGtB,eAAe,CAACc,gBAAD,CAAtC;;AAPgB,kBASoBlB,QAAQ,CAAC,KAAD,CAT5B;AAAA;AAAA,MAST2B,UATS;AAAA,MASGC,aATH;;AAAA,mBAUgB5B,QAAQ,CAAC,EAAD,CAVxB;AAAA;AAAA,MAUT6B,QAVS;AAAA,MAUCC,WAVD;;AAAA,mBAWU9B,QAAQ,CAAC,CAAD,CAXlB;AAAA;AAAA,MAWT+B,KAXS;AAAA,MAWFC,QAXE;;AAahB/B,EAAAA,SAAS,CAAC,YAAU;AAClBO,IAAAA,YAAY,CAACyB,EAAb,CAAgB,WAAhB,EAA6B,UAAUC,OAAV,EAAmBpB,MAAnB,EAA2B;AACtDE,MAAAA,OAAO,CAACC,GAAR,CAAYiB,OAAZ,EAAqBpB,MAArB;AAEAS,MAAAA,eAAe,CAAC;AAAEY,QAAAA,EAAE,EAAED,OAAN;AAAeE,QAAAA,KAAK,EAAEtB;AAAtB,OAAD,CAAf;AACD,KAJD,EADkB,CAOlB;AAEA;AACA;;AAEAN,IAAAA,YAAY,CAACyB,EAAb,CAAgB,UAAhB,EAA4B,UAAUJ,QAAV,EAAoBE,KAApB,EAA2B;AACrDf,MAAAA,OAAO,CAACC,GAAR,CAAYY,QAAZ,EAAsBE,KAAtB,EADqD,CAErD;AACA;AACA;AACD,KALD;AAOAvB,IAAAA,YAAY,CAACyB,EAAb,CAAgB,YAAhB,EAA8B,YAAU;AACtCX,MAAAA,UAAU;AACX,KAFD;AAID,GAvBQ,EAuBP,EAvBO,CAAT;AAyBA,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,OAAO,EAAE,mBAAM;AACjBF,MAAAA,qBAAqB;AACtB,KAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAKOC,OAAO,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAaA,OAAb,CALlB,EAMOI,YAAY,IAAIZ,mBAAmB,CAACN,WAAW,CAACkB,YAAD,CAAZ,CAN1C,CADK,eASL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCJ,OAAO,iBAAI;AAAQ,IAAA,OAAO,EAAEC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADZ,EAEGI,cAAc,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAA0BnB,WAAW,CAACmB,cAAD,CAArC,UAFrB,EAGCC,UAAU,KAAK,IAAf,iBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAkBE,QAAlB,cAA8BE,KAA9B,aAHxB,eAIE,oBAAC,KAAD;AAAO,IAAA,YAAY,EAAEvB,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CATK,CAAP;AAiBD,CAvDD;;AAyDA,eAAeW,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport { useEtherBalance, useEthers, useSendTransaction } from '@usedapp/core';\nimport { formatEther,formatUnits} from '@ethersproject/units'\nconst unityContext = new UnityContext({\n  loaderUrl: \"unity/Build/Build.loader.js\",\n  dataUrl: \"unity/Build/Build.data\",\n  frameworkUrl: \"unity/Build/Build.framework.js\",\n  codeUrl: \"unity/Build/Build.wasm\",\n});\n\nfunction EtherBalanceToUnity(amount : string) {\n  unityContext.send(\"GetAddressWallet\", \"EtherBalanceToUnity\", amount);\n  console.log(amount);\n}\n\nconst STAKING_CONTRACT = '0x00000000219ab540356cBB839Cbe05303d7705Fa'\nconst App = () => {\n\n  \n  const { activateBrowserWallet, account , deactivate} = useEthers();\n  const { sendTransaction, state } = useSendTransaction();\n // const { sendTransaction } = useSendTransaction({ transactionName: 'Send Ethereum' });\n  const etherBalance = useEtherBalance(account);\n  const stakingBalance = useEtherBalance(STAKING_CONTRACT)\n\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [score, setScore] = useState(0);\n\n  useEffect(function(){\n    unityContext.on(\"SendTrans\", function (address, amount) {\n      console.log(address, amount);\n     \n      sendTransaction({ to: address, value: amount});\n    });\n    \n    // unityContext.on(\"SendTranscationFromUnity\",( address, amount) => {\n      \n    //   sendTransaction({ to: address, value: amount })\n    // });\n\n    unityContext.on(\"GameOver\", function (userName, score) {\n      console.log(userName, score);\n      // setIsGameOver(true);\n      // setUserName(userName);\n      // setScore(score);\n    });\n\n    unityContext.on(\"Disconnect\", function(){\n      deactivate();\n    });\n\n  },[]);\n\n  return <div>\n    <div>\n      <button onClick={() => { \n            activateBrowserWallet(); \n          }}>Connect</button>\n\n          {account && <p>Account: {account}</p>}\n          {etherBalance && EtherBalanceToUnity(formatEther(etherBalance))}\n    </div>\n    <div>\n    {account && <button onClick={deactivate}> Disconnect </button>}\n      {stakingBalance && <p>ETH2 staking balance: {formatEther(stakingBalance)} ETH </p>}\n    {isGameOver === true && <p>{`Game Over! ${userName} ${score} points`}</p>}\n      <Unity unityContext={unityContext} />\n    </div>\n  </div>\n    \n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}