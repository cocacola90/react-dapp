{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/src/App.tsx\";\n\nimport React, { useEffect } from 'react';\nimport './App.css';\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport { useEtherBalance, useEthers, useSendTransaction } from '@usedapp/core';\nimport { formatEther } from '@ethersproject/units';\nvar unityContext = new UnityContext({\n  loaderUrl: \"unity/Build/Build.loader.js\",\n  dataUrl: \"unity/Build/Build.data\",\n  frameworkUrl: \"unity/Build/Build.framework.js\",\n  codeUrl: \"unity/Build/Build.wasm\"\n});\n\nfunction EtherBalanceToUnity(amount) {\n  unityContext.send(\"GetAddressWallet\", \"EtherBalanceToUnity\", amount);\n  console.log(amount);\n}\n\nvar App = function App() {\n  var _useEthers = useEthers(),\n      activateBrowserWallet = _useEthers.activateBrowserWallet,\n      account = _useEthers.account;\n\n  var _useSendTransaction = useSendTransaction({\n    transactionName: 'Send Ethereum'\n  }),\n      sendTransaction = _useSendTransaction.sendTransaction;\n\n  var etherBalance = useEtherBalance(account);\n  useEffect(function () {\n    unityContext.on(\"SendTranscationFromUnity\", function (address, amount) {\n      console.log(address, amount);\n      sendTransaction({\n        to: address,\n        value: amount\n      });\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      activateBrowserWallet();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, \"Connect\"), account && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 23\n    }\n  }, \"Account: \", account), etherBalance && EtherBalanceToUnity(formatEther(etherBalance))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Unity, {\n    unityContext: unityContext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/src/App.tsx"],"names":["React","useEffect","Unity","UnityContext","useEtherBalance","useEthers","useSendTransaction","formatEther","unityContext","loaderUrl","dataUrl","frameworkUrl","codeUrl","EtherBalanceToUnity","amount","send","console","log","App","activateBrowserWallet","account","transactionName","sendTransaction","etherBalance","on","address","to","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAO,WAAP;AACA,OAAOC,KAAP,IAAgBC,YAAhB,QAAoC,mBAApC;AACA,SAASC,eAAT,EAA0BC,SAA1B,EAAqCC,kBAArC,QAA+D,eAA/D;AACA,SAASC,WAAT,QAAuC,sBAAvC;AACA,IAAMC,YAAY,GAAG,IAAIL,YAAJ,CAAiB;AACpCM,EAAAA,SAAS,EAAE,6BADyB;AAEpCC,EAAAA,OAAO,EAAE,wBAF2B;AAGpCC,EAAAA,YAAY,EAAE,gCAHsB;AAIpCC,EAAAA,OAAO,EAAE;AAJ2B,CAAjB,CAArB;;AAOA,SAASC,mBAAT,CAA6BC,MAA7B,EAA8C;AAC5CN,EAAAA,YAAY,CAACO,IAAb,CAAkB,kBAAlB,EAAsC,qBAAtC,EAA6DD,MAA7D;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACD;;AAGD,IAAMI,GAAG,GAAG,SAANA,GAAM,GAAM;AAAA,mBAC2Bb,SAAS,EADpC;AAAA,MACRc,qBADQ,cACRA,qBADQ;AAAA,MACeC,OADf,cACeA,OADf;;AAAA,4BAGYd,kBAAkB,CAAC;AAAEe,IAAAA,eAAe,EAAE;AAAnB,GAAD,CAH9B;AAAA,MAGRC,eAHQ,uBAGRA,eAHQ;;AAIhB,MAAMC,YAAY,GAAGnB,eAAe,CAACgB,OAAD,CAApC;AACAnB,EAAAA,SAAS,CAAC,YAAU;AAGlBO,IAAAA,YAAY,CAACgB,EAAb,CAAgB,0BAAhB,EAA2C,UAAEC,OAAF,EAAWX,MAAX,EAAsB;AAC/DE,MAAAA,OAAO,CAACC,GAAR,CAAYQ,OAAZ,EAAqBX,MAArB;AACAQ,MAAAA,eAAe,CAAC;AAAEI,QAAAA,EAAE,EAAED,OAAN;AAAeE,QAAAA,KAAK,EAAEb;AAAtB,OAAD,CAAf;AACD,KAHD;AAID,GAPQ,EAOP,EAPO,CAAT;AAUA,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,OAAO,EAAE,mBAAM;AACjBK,MAAAA,qBAAqB;AACtB,KAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAIOC,OAAO,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAaA,OAAb,CAJlB,EAKOG,YAAY,IAAIV,mBAAmB,CAACN,WAAW,CAACgB,YAAD,CAAZ,CAL1C,CADK,eAQL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,YAAY,EAAEf,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CARK,CAAP;AAaD,CA5BD;;AA8BA,eAAeU,GAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport { useEtherBalance, useEthers, useSendTransaction } from '@usedapp/core';\nimport { formatEther,formatUnits} from '@ethersproject/units'\nconst unityContext = new UnityContext({\n  loaderUrl: \"unity/Build/Build.loader.js\",\n  dataUrl: \"unity/Build/Build.data\",\n  frameworkUrl: \"unity/Build/Build.framework.js\",\n  codeUrl: \"unity/Build/Build.wasm\",\n});\n\nfunction EtherBalanceToUnity(amount : string) {\n  unityContext.send(\"GetAddressWallet\", \"EtherBalanceToUnity\", amount);\n  console.log(amount);\n}\n\n\nconst App = () => {\n  const { activateBrowserWallet, account } = useEthers()\n\n  const { sendTransaction } = useSendTransaction({ transactionName: 'Send Ethereum' })\n  const etherBalance = useEtherBalance(account)\n  useEffect(function(){\n\n    \n    unityContext.on(\"SendTranscationFromUnity\",( address, amount) => {\n      console.log(address, amount);\n      sendTransaction({ to: address, value: amount })\n    });\n  },[]);\n\n  \n  return <div>\n    <div>\n      <button onClick={() => { \n            activateBrowserWallet(); \n          }}>Connect</button>\n          {account && <p>Account: {account}</p>}\n          {etherBalance && EtherBalanceToUnity(formatEther(etherBalance))}\n    </div>\n    <div>\n      <Unity unityContext={unityContext} />\n    </div>\n  </div>\n    \n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}