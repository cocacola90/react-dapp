{"ast":null,"code":"import { useEffect, useState } from 'react';\n\nfunction getItem(key) {\n  if (typeof window === 'undefined') {\n    return null;\n  }\n\n  const item = window.localStorage.getItem(key);\n\n  if (item !== null) {\n    try {\n      return JSON.parse(item);\n    } catch (_a) {// ignore error\n    }\n  }\n}\n\nfunction setItem(key, value) {\n  if (value === undefined) {\n    window.localStorage.removeItem(key);\n  } else {\n    const toStore = JSON.stringify(value);\n    window.localStorage.setItem(key, toStore);\n    return JSON.parse(toStore);\n  }\n}\n\nexport function useLocalStorage(key) {\n  const [value, setValue] = useState(() => getItem(key));\n  useEffect(() => {\n    setValue(getItem(key));\n  }, [key]);\n  useEffect(() => {\n    setItem(key, value);\n  }, [value, key]);\n  return [value, setValue];\n}","map":{"version":3,"sources":["/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/node_modules/@usedapp/core/src/hooks/useLocalStorage.ts"],"names":[],"mappings":"AAAA,SAAS,SAAT,EAAoB,QAApB,QAAoC,OAApC;;AAEA,SAAS,OAAT,CAAiB,GAAjB,EAA4B;AAC1B,MAAI,OAAO,MAAP,KAAkB,WAAtB,EAAmC;AACjC,WAAO,IAAP;AACD;;AAED,QAAM,IAAI,GAAG,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,GAA5B,CAAb;;AACA,MAAI,IAAI,KAAK,IAAb,EAAmB;AACjB,QAAI;AACF,aAAO,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;AACD,KAFD,CAEE,OAAA,EAAA,EAAM,CACN;AACD;AACF;AACF;;AAED,SAAS,OAAT,CAAiB,GAAjB,EAA8B,KAA9B,EAAwC;AACtC,MAAI,KAAK,KAAK,SAAd,EAAyB;AACvB,IAAA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAA+B,GAA/B;AACD,GAFD,MAEO;AACL,UAAM,OAAO,GAAG,IAAI,CAAC,SAAL,CAAe,KAAf,CAAhB;AACA,IAAA,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,GAA5B,EAAiC,OAAjC;AACA,WAAO,IAAI,CAAC,KAAL,CAAW,OAAX,CAAP;AACD;AACF;;AAED,OAAM,SAAU,eAAV,CAA0B,GAA1B,EAAqC;AACzC,QAAM,CAAC,KAAD,EAAQ,QAAR,IAAoB,QAAQ,CAAC,MAAM,OAAO,CAAC,GAAD,CAAd,CAAlC;AAEA,EAAA,SAAS,CAAC,MAAK;AACb,IAAA,QAAQ,CAAC,OAAO,CAAC,GAAD,CAAR,CAAR;AACD,GAFQ,EAEN,CAAC,GAAD,CAFM,CAAT;AAIA,EAAA,SAAS,CAAC,MAAK;AACb,IAAA,OAAO,CAAC,GAAD,EAAM,KAAN,CAAP;AACD,GAFQ,EAEN,CAAC,KAAD,EAAQ,GAAR,CAFM,CAAT;AAIA,SAAO,CAAC,KAAD,EAAQ,QAAR,CAAP;AACD","sourcesContent":["import { useEffect, useState } from 'react'\n\nfunction getItem(key: string) {\n  if (typeof window === 'undefined') {\n    return null\n  }\n\n  const item = window.localStorage.getItem(key)\n  if (item !== null) {\n    try {\n      return JSON.parse(item)\n    } catch {\n      // ignore error\n    }\n  }\n}\n\nfunction setItem(key: string, value: any) {\n  if (value === undefined) {\n    window.localStorage.removeItem(key)\n  } else {\n    const toStore = JSON.stringify(value)\n    window.localStorage.setItem(key, toStore)\n    return JSON.parse(toStore)\n  }\n}\n\nexport function useLocalStorage(key: string) {\n  const [value, setValue] = useState(() => getItem(key))\n\n  useEffect(() => {\n    setValue(getItem(key))\n  }, [key])\n\n  useEffect(() => {\n    setItem(key, value)\n  }, [value, key])\n\n  return [value, setValue] as const\n}\n"]},"metadata":{},"sourceType":"module"}