{"ast":null,"code":"import _slicedToArray from \"/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/src/App.tsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport { useEtherBalance, useEthers, useSendTransaction } from '@usedapp/core';\nimport { formatEther } from '@ethersproject/units';\nvar unityContext = new UnityContext({\n  loaderUrl: \"unity/Build/Build.loader.js\",\n  dataUrl: \"unity/Build/Build.data\",\n  frameworkUrl: \"unity/Build/Build.framework.js\",\n  codeUrl: \"unity/Build/Build.wasm\"\n});\n\nfunction EtherBalanceToUnity(amount) {\n  unityContext.send(\"GetAddressWallet\", \"EtherBalanceToUnity\", amount);\n  console.log(amount);\n}\n\nvar App = function App() {\n  var _useEthers = useEthers(),\n      activateBrowserWallet = _useEthers.activateBrowserWallet,\n      account = _useEthers.account,\n      deactivate = _useEthers.deactivate;\n\n  var _useSendTransaction = useSendTransaction({\n    transactionName: 'Send Ethereum'\n  }),\n      sendTransaction = _useSendTransaction.sendTransaction;\n\n  var etherBalance = useEtherBalance(account);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isGameOver = _useState2[0],\n      setIsGameOver = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userName = _useState4[0],\n      setUserName = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      score = _useState6[0],\n      setScore = _useState6[1];\n\n  useEffect(function () {\n    unityContext.on(\"SendTrans\", function (address, amount) {\n      console.log(address, amount);\n      sendTransaction({\n        to: address,\n        value: amount\n      });\n    }); // unityContext.on(\"SendTranscationFromUnity\",( address, amount) => {\n    //   sendTransaction({ to: address, value: amount })\n    // });\n\n    unityContext.on(\"GameOver\", function (userName, score) {\n      console.log(userName, score); // setIsGameOver(true);\n      // setUserName(userName);\n      // setScore(score);\n    });\n    unityContext.on(\"Disconnect\", function () {\n      deactivate();\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      activateBrowserWallet();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \"Connect\"), account && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 23\n    }\n  }, \"Account: \", account), etherBalance && EtherBalanceToUnity(formatEther(etherBalance))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      deactivate();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, \"Disconnect\"), isGameOver === true && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, \"Game Over! \".concat(userName, \" \").concat(score, \" points\")), /*#__PURE__*/React.createElement(Unity, {\n    unityContext: unityContext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/src/App.tsx"],"names":["React","useState","useEffect","Unity","UnityContext","useEtherBalance","useEthers","useSendTransaction","formatEther","unityContext","loaderUrl","dataUrl","frameworkUrl","codeUrl","EtherBalanceToUnity","amount","send","console","log","App","activateBrowserWallet","account","deactivate","transactionName","sendTransaction","etherBalance","isGameOver","setIsGameOver","userName","setUserName","score","setScore","on","address","to","value"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,OAAO,WAAP;AACA,OAAOC,KAAP,IAAgBC,YAAhB,QAAoC,mBAApC;AACA,SAASC,eAAT,EAA0BC,SAA1B,EAAqCC,kBAArC,QAA+D,eAA/D;AACA,SAASC,WAAT,QAAuC,sBAAvC;AACA,IAAMC,YAAY,GAAG,IAAIL,YAAJ,CAAiB;AACpCM,EAAAA,SAAS,EAAE,6BADyB;AAEpCC,EAAAA,OAAO,EAAE,wBAF2B;AAGpCC,EAAAA,YAAY,EAAE,gCAHsB;AAIpCC,EAAAA,OAAO,EAAE;AAJ2B,CAAjB,CAArB;;AAOA,SAASC,mBAAT,CAA6BC,MAA7B,EAA8C;AAC5CN,EAAAA,YAAY,CAACO,IAAb,CAAkB,kBAAlB,EAAsC,qBAAtC,EAA6DD,MAA7D;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACD;;AAGD,IAAMI,GAAG,GAAG,SAANA,GAAM,GAAM;AAAA,mBACuCb,SAAS,EADhD;AAAA,MACRc,qBADQ,cACRA,qBADQ;AAAA,MACeC,OADf,cACeA,OADf;AAAA,MACyBC,UADzB,cACyBA,UADzB;;AAAA,4BAGYf,kBAAkB,CAAC;AAAEgB,IAAAA,eAAe,EAAE;AAAnB,GAAD,CAH9B;AAAA,MAGRC,eAHQ,uBAGRA,eAHQ;;AAIhB,MAAMC,YAAY,GAAGpB,eAAe,CAACgB,OAAD,CAApC;;AAJgB,kBAMoBpB,QAAQ,CAAC,KAAD,CAN5B;AAAA;AAAA,MAMTyB,UANS;AAAA,MAMGC,aANH;;AAAA,mBAOgB1B,QAAQ,CAAC,EAAD,CAPxB;AAAA;AAAA,MAOT2B,QAPS;AAAA,MAOCC,WAPD;;AAAA,mBAQU5B,QAAQ,CAAC,CAAD,CARlB;AAAA;AAAA,MAQT6B,KARS;AAAA,MAQFC,QARE;;AAWhB7B,EAAAA,SAAS,CAAC,YAAU;AAClBO,IAAAA,YAAY,CAACuB,EAAb,CAAgB,WAAhB,EAA6B,UAAUC,OAAV,EAAmBlB,MAAnB,EAA2B;AACtDE,MAAAA,OAAO,CAACC,GAAR,CAAYe,OAAZ,EAAqBlB,MAArB;AACAS,MAAAA,eAAe,CAAC;AAAEU,QAAAA,EAAE,EAAED,OAAN;AAAeE,QAAAA,KAAK,EAAEpB;AAAtB,OAAD,CAAf;AACD,KAHD,EADkB,CAMlB;AAEA;AACA;;AAEAN,IAAAA,YAAY,CAACuB,EAAb,CAAgB,UAAhB,EAA4B,UAAUJ,QAAV,EAAoBE,KAApB,EAA2B;AACrDb,MAAAA,OAAO,CAACC,GAAR,CAAYU,QAAZ,EAAsBE,KAAtB,EADqD,CAErD;AACA;AACA;AACD,KALD;AAOArB,IAAAA,YAAY,CAACuB,EAAb,CAAgB,YAAhB,EAA8B,YAAU;AACtCV,MAAAA,UAAU;AACX,KAFD;AAID,GAtBQ,EAsBP,EAtBO,CAAT;AAyBA,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,OAAO,EAAE,mBAAM;AACjBF,MAAAA,qBAAqB;AACtB,KAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAKOC,OAAO,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAaA,OAAb,CALlB,EAMOI,YAAY,IAAIX,mBAAmB,CAACN,WAAW,CAACiB,YAAD,CAAZ,CAN1C,CADK,eASL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAQ,IAAA,OAAO,EAAE,mBAAM;AACfH,MAAAA,UAAU;AACX,KAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,EAKCI,UAAU,KAAK,IAAf,iBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAkBE,QAAlB,cAA8BE,KAA9B,aALxB,eAME,oBAAC,KAAD;AAAO,IAAA,YAAY,EAAErB,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CATK,CAAP;AAmBD,CAvDD;;AAyDA,eAAeU,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport { useEtherBalance, useEthers, useSendTransaction } from '@usedapp/core';\nimport { formatEther,formatUnits} from '@ethersproject/units'\nconst unityContext = new UnityContext({\n  loaderUrl: \"unity/Build/Build.loader.js\",\n  dataUrl: \"unity/Build/Build.data\",\n  frameworkUrl: \"unity/Build/Build.framework.js\",\n  codeUrl: \"unity/Build/Build.wasm\",\n});\n\nfunction EtherBalanceToUnity(amount : string) {\n  unityContext.send(\"GetAddressWallet\", \"EtherBalanceToUnity\", amount);\n  console.log(amount);\n}\n\n\nconst App = () => {\n  const { activateBrowserWallet, account , deactivate} = useEthers();\n  \n  const { sendTransaction } = useSendTransaction({ transactionName: 'Send Ethereum' });\n  const etherBalance = useEtherBalance(account);\n\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [score, setScore] = useState(0);\n\n\n  useEffect(function(){\n    unityContext.on(\"SendTrans\", function (address, amount) {\n      console.log(address, amount);\n      sendTransaction({ to: address, value: amount})\n    });\n    \n    // unityContext.on(\"SendTranscationFromUnity\",( address, amount) => {\n      \n    //   sendTransaction({ to: address, value: amount })\n    // });\n\n    unityContext.on(\"GameOver\", function (userName, score) {\n      console.log(userName, score);\n      // setIsGameOver(true);\n      // setUserName(userName);\n      // setScore(score);\n    });\n\n    unityContext.on(\"Disconnect\", function(){\n      deactivate();\n    });\n\n  },[]);\n\n  \n  return <div>\n    <div>\n      <button onClick={() => { \n            activateBrowserWallet(); \n          }}>Connect</button>\n\n          {account && <p>Account: {account}</p>}\n          {etherBalance && EtherBalanceToUnity(formatEther(etherBalance))}\n    </div>\n    <div>\n    <button onClick={() => { \n            deactivate(); \n          }}>Disconnect</button>\n          \n    {isGameOver === true && <p>{`Game Over! ${userName} ${score} points`}</p>}\n      <Unity unityContext={unityContext} />\n    </div>\n  </div>\n    \n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}