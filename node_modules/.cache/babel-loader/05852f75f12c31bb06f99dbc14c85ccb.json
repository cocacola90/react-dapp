{"ast":null,"code":"import _slicedToArray from \"/Users/kenshin/Documents/UnityProject/useDapp_demo/dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useReducer } from 'react';\nimport { BlockNumberContext } from './context';\nimport { blockNumberReducer } from './reducer';\nimport { useEthers, useDebounce } from '../../hooks';\nexport function BlockNumberProvider(_ref) {\n  var children = _ref.children;\n\n  var _useEthers = useEthers(),\n      library = _useEthers.library,\n      chainId = _useEthers.chainId;\n\n  var _useReducer = useReducer(blockNumberReducer, {}),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  useEffect(function () {\n    if (library && chainId !== undefined) {\n      var update = function update(blockNumber) {\n        return dispatch({\n          chainId: chainId,\n          blockNumber: blockNumber\n        });\n      };\n\n      library.on('block', update);\n      return function () {\n        library.off('block', update);\n      };\n    }\n  }, [library, chainId]);\n  var debouncedState = useDebounce(state, 100);\n  var blockNumber = chainId !== undefined ? debouncedState[chainId] : undefined;\n  return _jsx(BlockNumberContext.Provider, {\n    value: blockNumber,\n    children: children\n  }, void 0);\n}","map":null,"metadata":{},"sourceType":"module"}